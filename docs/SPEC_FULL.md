# ğŸ“‹ HomeworkGuardian - Full SPEC (å‚è€ƒ tonyliugd/monitoringStudy)

## 1. é¡¹ç›®æ¦‚è¿°

**åç§°**: HomeworkGuardian  
**ç±»å‹**: å„¿ç«¥å­¦ä¹ ç›‘æ§ç³»ç»Ÿ  
**å‚è€ƒ**: https://github.com/tonyliugd/-/blob/main/monitoringStudy

## 2. æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | å‚è€ƒé¡¹ç›® | æœ¬é¡¹ç›® | å®ç°ä½ç½® |
|---|---|---|---|
| å®æ—¶è§†é¢‘ç›‘æ§ | âœ… Tkinter GUI | âœ… Flutter App | Mobile |
| MediaPipe æ‰‹éƒ¨æ£€æµ‹ | âœ… | âœ… | Server/Mobile |
| äººè„¸æ£€æµ‹ (OpenCV) | âœ… | âœ… | Server |
| ç¦»å¼€æ£€æµ‹æé†’ | âœ… (5åˆ†é’Ÿ) | âœ… (15åˆ†é’Ÿå¯è°ƒ) | Server |
| è¾¹ç©è¾¹å­¦æ£€æµ‹ | âœ… (æ‰‹éƒ¨é è¿‘è„¸éƒ¨) | âœ… | Server |
| å£°éŸ³æé†’ (Pygame) | âœ… | âœ… | Server |
| å¤šæ‘„åƒå¤´ç®¡ç† | âœ… | âœ… | Mobile |
| å­¦ç§‘è¯†åˆ« | âœ… (AI OCR/å…³é”®è¯) | å¯é€‰ | Server |
| å­¦ä¹ æŠ¥å‘Š | âœ… | âœ… | Server |
| é‚®ä»¶æ¨é€ | âŒ | âœ… | Server |
| è¾¹ç¼˜è®¡ç®—ä¸Šä¼  | âŒ | âœ… | Mobile |

## 3. æ ¸å¿ƒæ£€æµ‹ç®—æ³•

```python
# å‚è€ƒé¡¹ç›®çš„æ ¸å¿ƒé€»è¾‘
class StudyMonitor:
    # 1. æ‘„åƒå¤´æ£€æµ‹
    def detect_available_cameras(self):
        # å°è¯•å¤šä¸ªæ‘„åƒå¤´ç´¢å¼•
        for i in range(10):
            cap = cv2.VideoCapture(i)
            if cap.isOpened():
                cameras.append(i)
    
    # 2. çŠ¶æ€æ£€æµ‹æµç¨‹
    def process_frame(self, frame):
        # 2.1 äººè„¸æ£€æµ‹ (ç¡®è®¤äººåœ¨)
        face_detected = self.face_cascade.detectMultiScale(frame)
        
        # 2.2 MediaPipe æ‰‹éƒ¨æ£€æµ‹
        hand_results = self.hands.process(frame)
        
        if hand_results.multi_hand_landmarks:
            # 2.3 æ£€æµ‹æ‰‹éƒ¨ä½ç½®
            for hand_landmark in hand_results.multi_hand_landmarks:
                # è·å–å…³é”®ç‚¹
                wrist = hand_landmark.landmark[0]
                index_tip = hand_landmark.landmark[8]
                
                # 2.4 åˆ¤æ–­æ˜¯å¦åœ¨ç©æ‰‹æœº
                if self.is_hand_near_face(wrist, face_position):
                    status = "playing"
                else:
                    status = "studying"
        else:
            # 2.5 æ— äººæˆ–ç¦»å¼€
            status = "away"
        
        # 3. çŠ¶æ€æŒç»­æ—¶é—´æ£€æµ‹
        if status != "studying":
            self.idle_duration += frame_time
            if self.idle_duration > self.alert_threshold:
                self.trigger_alert()
        else:
            self.idle_duration = 0
            self.study_duration += frame_time
```

## 4. æé†’ç³»ç»Ÿ

| å‚æ•° | å‚è€ƒå€¼ | å¯é…ç½® |
|---|---|---|
| ç¦»å¼€æé†’é˜ˆå€¼ | 300ç§’ (5åˆ†é’Ÿ) | âœ… |
| æ£€æµ‹å¸§ç‡ | 30 FPS | âœ… |
| æ‘„åƒå¤´è½®è¯¢ | æ˜¯ | âœ… |
| å£°éŸ³æé†’ | pygame | âœ… |
| å¼¹çª—æé†’ | tkinter messagebox | âœ… (ç§»åŠ¨ç«¯ä¸ºæ¨é€) |

## 5. å­¦ç§‘è¯†åˆ« (å¯é€‰åŠŸèƒ½)

```python
subject_keywords = {
    "æ•°å­¦": ["æ–¹ç¨‹", "å‡½æ•°", "å‡ ä½•", "è®¡ç®—"],
    "è¯­æ–‡": ["æ±‰å­—", "ä½œæ–‡", "é˜…è¯»", "å¤è¯—"],
    "è‹±è¯­": ["English", "å•è¯", "è¯­æ³•"],
    "ç‰©ç†": ["åŠ›å­¦", "è¿åŠ¨", "èƒ½é‡"],
    # ... æ›´å¤šå­¦ç§‘
}
```

## 6. ç³»ç»Ÿæ¶æ„æœ€ç»ˆç‰ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ‰‹æœºç«¯ (Mobile)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  æ‘„åƒå¤´é‡‡é›†  â”‚  â”‚  æœ¬åœ°AIæ¨ç†  â”‚  â”‚  è¾¹ç¼˜ä¸Šä¼    â”‚    â”‚
â”‚  â”‚  (ç›¸æœº)    â”‚â†’ â”‚ (MediaPipe) â”‚â†’ â”‚ (å‹ç¼©ä¼ è¾“)  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æœåŠ¡å™¨ç«¯ (Server)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ·±åº¦åˆ†æ   â”‚  â”‚  æé†’æœåŠ¡   â”‚  â”‚  æŠ¥å‘Šç”Ÿæˆ   â”‚   â”‚
â”‚  â”‚ (GPUåŠ é€Ÿ)  â”‚  â”‚ (é‚®ä»¶/æ¨é€) â”‚  â”‚ (æ—¥æŠ¥/å‘¨æŠ¥) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 å®¶é•¿ç«¯ (å¯é€‰ Desktop GUI)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å®æ—¶æŸ¥çœ‹   â”‚  â”‚  å†å²æŠ¥å‘Š   â”‚  â”‚  ç³»ç»Ÿè®¾ç½®   â”‚   â”‚
â”‚  â”‚  (Tkinter) â”‚  â”‚            â”‚  â”‚            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 7. æ•°æ®æ¨¡å‹

```python
class StudySession:
    session_id: str
    start_time: datetime
    end_time: datetime
    total_duration: int  # ç§’
    study_duration: int  # å®é™…å­¦ä¹ æ—¶é—´
    activities: List[ActivityRecord]
    alerts: List[AlertRecord]

class ActivityRecord:
    timestamp: datetime
    activity: str  # "studying", "playing", "away", "idle"
    confidence: float
    duration: int
```

## 8. å®ç°ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | æ¨¡å— | æè¿° |
|---|---|---|
| P0 | æ‰‹æœºç«¯æ‘„åƒå¤´ | å®æ—¶è§†é¢‘é‡‡é›† |
| P0 | æœ¬åœ°AIæ£€æµ‹ | MediaPipe å§¿æ€/æ‰‹éƒ¨ |
| P0 | æœåŠ¡å™¨API | æ•°æ®æ¥æ”¶/å­˜å‚¨ |
| P0 | æé†’æœåŠ¡ | ç¦»å¼€/ç©è€æ£€æµ‹ |
| P1 | é‚®ä»¶æ¨é€ | å®¶é•¿é€šçŸ¥ |
| P1 | æ¡Œé¢GUI | å®æ—¶ç›‘æ§ (å¯é€‰) |
| P2 | å­¦ç§‘è¯†åˆ« | AI OCR (å¯é€‰) |

---

*Last Updated: 2026-02-21*
*Reference: tonyliugd/monitoringStudy*
